#include <stdio.h>
#include <stdlib.h>

typedef void (*fp)();

void func1()
{
    printf("[*] --------> This is func 1\n");
}
void func2()
{
    printf("[*] --------> This is func 2\n");
}

void main()
{
    fp *pointer1 = malloc(sizeof(fp));
    *pointer1 = func1;
    (*pointer1)();

    printf("[1] pointer1 points to %p\n", pointer1);
    printf("[2] Freeing pointer1\n");
    free(pointer1);

    fp *pointer2 = malloc(sizeof(fp));
    *pointer2 = func2;
    (*pointer2)();

    printf("[3] pointer2 points to %p\n", pointer2);

    printf("[4] Using pointer1 after free\n");

    (*pointer1)();
    //gets();
}